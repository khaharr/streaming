<template>
    <div class="container">
        <div
            class="fr-grid-row fr-grid-row--center fr-grid-row--middle"
            style="flex-direction: column"
        >
            <h1>
                <img :src="handleImage('clir-dsfr.svg')" style="height: 15rem" />
            </h1>
            <Hello msg="Bienvenue sur votre projet blanc" />

            <div>
                <fr-button 
                    @click="getData" 
                    id="loginButton"
                    class="fr-mt-2w"
                    title="Connexion"
                    label="appuyer"
                    type="submit"
                >
                    Appuyer
                </fr-button>
            </div>

            <div class="result">
                <div v-for="(item, index) in data" :key="index" class="card">
                    <h2>{{ item.nom }}</h2>
                    <p>{{ item.adresse }}</p>
                    <p>{{ item.ville }}</p>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
import Hello from '@/components/Hello/Hello.vue';

export default {
    components: {
        Hello
    },
    data() {
        return {
            data: [] // Propriété réactive pour stocker les données de l'API
        };
    },
    methods: {
        getData() {
            fetch('http://localhost:8084/monappli-api/api/centreimpot/findAll')
                .then(res => res.json())
                .then(data => {
                    this.data = data;
                })
                .catch(error => console.log(error));
        }
    }
}
</script>

<style scoped>
.card {
    border: 1px solid #ddd;
    padding: 1rem;
    margin: 1rem 0;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}
</style>